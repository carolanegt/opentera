<!DOCTYPE html>
<html>
   <head>
      <meta charset="UTF-8" />
      <title>OpenTera - VideoRehab service - Participant</title>

       <script src="./static/js/opentera.js"></script> <!-- Always include first -->
	   <script src="./static/js/opentera_websockets.js"></script>
	   <script src="./static/js/opentera_login.js"></script>
	   <script src="./static/js/opentera_dashboard.js"></script>

      <script src="./static/js/jquery-3.5.1.min.js"></script>
      <link href="./static/css/fontawesome.min.css" rel="stylesheet" />
      <link href="./static/css/solid.min.css" rel="stylesheet" />
      <link rel="stylesheet" href="./static/bootstrap/css/bootstrap.min.css" />
      <link rel="stylesheet" href="./static/css/main_style.css" />

      <script src="./static/bootstrap/js/bootstrap.min.js"></script>

	   <!-- Server informations -->
	   <script>
			var service_hostname = "{{ hostname }}";
			var service_port = {{ port }};
			var backend_hostname = "{{ backend_hostname }}";
			var backend_port = {{ backend_port }};
			var participant_token = "{{ participant_token }}";
			var participant_name = "{{ participant_name }}";
			var participant_uuid = "{{ participant_uuid }}";
	   </script>
   </head>
   <body onload = "init_dashboard('{{ backend_hostname }}', {{ backend_port }});
   doParticipantLogin(backend_hostname, backend_port, participant_token);">
	<div id="communicator" style="position:absolute;top:0;left:0;width:100%;height:50px;border:0;">
		<div align="left" style="display:block;position:absolute;">
			<img id="imgLogo" src="./static/images/teraplus.png" height="50px"/>
		</div>
		<div style="display:block;position:absolute;top:10px;right:0px;padding-right:12.5px;">
			<button id="btnStopSession" name="none" onclick="doStopCurrentSession(this.name);" style="display:none;" class="bg-primary">Terminer la séance</button>
			<button id="btnLogout" onclick="doLogout(backend_hostname, backend_port);">Déconnexion</button>
			<img id="imgStatus" src="./static/images/grey_button.png" width="24px"/>
			<!--<label id="socketUrl" style="display:none;">
				<out value="#{socket.getServerUrl}"/>
			</label>
			<label id="socketPort" style="display:none;">
				<out value="#{socket.getPort}"/>
			</label>-->
		</div>
		<div align="center" style="line-height:50px;display:block;vertical-align:middle;height:50px;margin:auto;">
			<label id="displayname">{{ participant_name }}</label>
		</div>
	</div>
	<iframe id="mainview" class = "iframe-with-footer" src="participant_localview?token={{ participant_token }}" style="position:absolute;top:50px;left:0;width:100%;border:0;" allow="camera; microphone;">Frames not supported in this browser!</iframe>
   {% include "footer.html" %}
    </body>
</html>

